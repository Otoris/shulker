'use strict';

var AddEntriesFromIterable = require('es-abstract/2019/AddEntriesFromIterable');
var CreateDataPropertyOrThrow = require('es-abstract/2019/CreateDataPropertyOrThrow');
var Get = require('es-abstract/2019/Get');
var IsArray = require('es-abstract/2019/IsArray');
var RequireObjectCoercible = require('es-abstract/2019/RequireObjectCoercible');
var ToPropertyKey = require('es-abstract/2019/ToPropertyKey');
var Type = require('es-abstract/2019/Type');

var adder = function addDataProperty(key, value) ***REMOVED***
	var O = this; // eslint-disable-line no-invalid-this
	var propertyKey = ToPropertyKey(key);
	CreateDataPropertyOrThrow(O, propertyKey, value);
***REMOVED***;

var legacyAssign = function assign(obj, entries) ***REMOVED***
	for (var i = 0; i < entries.length; ++i) ***REMOVED***
		var entry = entries[i];
		if (Type(entry) !== 'Object') ***REMOVED***
			throw new TypeError('iterator returned a non-object; entry expected');
		***REMOVED***

		var key = Get(entry, '0');
		var value = Get(entry, '1');
		var propertyKey = ToPropertyKey(key);
		CreateDataPropertyOrThrow(obj, propertyKey, value);
	***REMOVED***
***REMOVED***;

var hasSymbols = typeof Symbol === 'function' && typeof Symbol('foo') === 'symbol';

module.exports = function fromEntries(iterable) ***REMOVED***
	RequireObjectCoercible(iterable);

	var obj = ***REMOVED******REMOVED***;

	// this part isn't in the spec, it's for a reasonable fallback for pre-ES6 environments
	if (!hasSymbols) ***REMOVED***
		if (!IsArray(iterable)) ***REMOVED***
			throw new TypeError('this environment lacks native Symbols, and can not support non-Array iterables');
		***REMOVED***
		legacyAssign(obj, iterable);
		return obj;
	***REMOVED***

	return AddEntriesFromIterable(obj, iterable, adder);
***REMOVED***;
