'use strict'

const getDocsUrl = require('./lib/get-docs-url')
const isPromise = require('./lib/is-promise')

module.exports = ***REMOVED***
  meta: ***REMOVED***
    docs: ***REMOVED***
      url: getDocsUrl('no-return-in-finally')
    ***REMOVED***
  ***REMOVED***,
  create(context) ***REMOVED***
    return ***REMOVED***
      CallExpression(node) ***REMOVED***
        if (isPromise(node)) ***REMOVED***
          if (
            node.callee &&
            node.callee.property &&
            node.callee.property.name === 'finally'
          ) ***REMOVED***
            if (
              node.arguments &&
              node.arguments[0] &&
              node.arguments[0].body &&
              node.arguments[0].body.body
            ) ***REMOVED***
              if (
                node.arguments[0].body.body.some(statement => ***REMOVED***
                  return statement.type === 'ReturnStatement'
                ***REMOVED***)
              ) ***REMOVED***
                context.report(***REMOVED***
                  node: node.callee.property,
                  message: 'No return in finally'
                ***REMOVED***)
              ***REMOVED***
            ***REMOVED***
          ***REMOVED***
        ***REMOVED***
      ***REMOVED***
    ***REMOVED***
  ***REMOVED***
***REMOVED***
