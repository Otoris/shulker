'use strict';
const callsites = require('callsites');

module.exports = filepath => ***REMOVED***
	const stacks = callsites();

	if (!filepath) ***REMOVED***
		return stacks[2].getFileName();
	***REMOVED***

	let seenVal = false;

	// Skip the first stack as it's this function
	stacks.shift();

	for (const stack of stacks) ***REMOVED***
		const parentFilepath = stack.getFileName();

		if (typeof parentFilepath !== 'string') ***REMOVED***
			continue;
		***REMOVED***

		if (parentFilepath === filepath) ***REMOVED***
			seenVal = true;
			continue;
		***REMOVED***

		// Skip native modules
		if (parentFilepath === 'module.js') ***REMOVED***
			continue;
		***REMOVED***

		if (seenVal && parentFilepath !== filepath) ***REMOVED***
			return parentFilepath;
		***REMOVED***
	***REMOVED***
***REMOVED***;
