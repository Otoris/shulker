const fs = require('fs');

const ***REMOVED*** Snekfetch, TestRoot ***REMOVED*** = require('../interop');

require('../main');

test('node/pipe get', (done) => ***REMOVED***
  Snekfetch.get(`$***REMOVED***TestRoot***REMOVED***/get`)
    .pipe(fs.createWriteStream('/dev/null'))
    .on('finish', done);
***REMOVED***);


test('node/FormData json works', () =>
  Snekfetch.post(`$***REMOVED***TestRoot***REMOVED***/post`)
    .attach('object', ***REMOVED*** a: 1 ***REMOVED***)
    .then((res) => ***REMOVED***
      const ***REMOVED*** form ***REMOVED*** = res.body;
      expect(form.object).toBe('***REMOVED***"a":1***REMOVED***');
    ***REMOVED***)
);

test('node/rawsend post', () =>
  Snekfetch.post(`$***REMOVED***TestRoot***REMOVED***/post`)
    .send(Buffer.from('memes')).end()
);
