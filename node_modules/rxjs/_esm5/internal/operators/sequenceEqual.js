/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */
import * as tslib_1 from "tslib";
import ***REMOVED*** Subscriber ***REMOVED*** from '../Subscriber';
export function sequenceEqual(compareTo, comparator) ***REMOVED***
    return function (source) ***REMOVED*** return source.lift(new SequenceEqualOperator(compareTo, comparator)); ***REMOVED***;
***REMOVED***
var SequenceEqualOperator = /*@__PURE__*/ (function () ***REMOVED***
    function SequenceEqualOperator(compareTo, comparator) ***REMOVED***
        this.compareTo = compareTo;
        this.comparator = comparator;
    ***REMOVED***
    SequenceEqualOperator.prototype.call = function (subscriber, source) ***REMOVED***
        return source.subscribe(new SequenceEqualSubscriber(subscriber, this.compareTo, this.comparator));
    ***REMOVED***;
    return SequenceEqualOperator;
***REMOVED***());
export ***REMOVED*** SequenceEqualOperator ***REMOVED***;
var SequenceEqualSubscriber = /*@__PURE__*/ (function (_super) ***REMOVED***
    tslib_1.__extends(SequenceEqualSubscriber, _super);
    function SequenceEqualSubscriber(destination, compareTo, comparator) ***REMOVED***
        var _this = _super.call(this, destination) || this;
        _this.compareTo = compareTo;
        _this.comparator = comparator;
        _this._a = [];
        _this._b = [];
        _this._oneComplete = false;
        _this.destination.add(compareTo.subscribe(new SequenceEqualCompareToSubscriber(destination, _this)));
        return _this;
    ***REMOVED***
    SequenceEqualSubscriber.prototype._next = function (value) ***REMOVED***
        if (this._oneComplete && this._b.length === 0) ***REMOVED***
            this.emit(false);
        ***REMOVED***
        else ***REMOVED***
            this._a.push(value);
            this.checkValues();
        ***REMOVED***
    ***REMOVED***;
    SequenceEqualSubscriber.prototype._complete = function () ***REMOVED***
        if (this._oneComplete) ***REMOVED***
            this.emit(this._a.length === 0 && this._b.length === 0);
        ***REMOVED***
        else ***REMOVED***
            this._oneComplete = true;
        ***REMOVED***
        this.unsubscribe();
    ***REMOVED***;
    SequenceEqualSubscriber.prototype.checkValues = function () ***REMOVED***
        var _c = this, _a = _c._a, _b = _c._b, comparator = _c.comparator;
        while (_a.length > 0 && _b.length > 0) ***REMOVED***
            var a = _a.shift();
            var b = _b.shift();
            var areEqual = false;
            try ***REMOVED***
                areEqual = comparator ? comparator(a, b) : a === b;
            ***REMOVED***
            catch (e) ***REMOVED***
                this.destination.error(e);
            ***REMOVED***
            if (!areEqual) ***REMOVED***
                this.emit(false);
            ***REMOVED***
        ***REMOVED***
    ***REMOVED***;
    SequenceEqualSubscriber.prototype.emit = function (value) ***REMOVED***
        var destination = this.destination;
        destination.next(value);
        destination.complete();
    ***REMOVED***;
    SequenceEqualSubscriber.prototype.nextB = function (value) ***REMOVED***
        if (this._oneComplete && this._a.length === 0) ***REMOVED***
            this.emit(false);
        ***REMOVED***
        else ***REMOVED***
            this._b.push(value);
            this.checkValues();
        ***REMOVED***
    ***REMOVED***;
    SequenceEqualSubscriber.prototype.completeB = function () ***REMOVED***
        if (this._oneComplete) ***REMOVED***
            this.emit(this._a.length === 0 && this._b.length === 0);
        ***REMOVED***
        else ***REMOVED***
            this._oneComplete = true;
        ***REMOVED***
    ***REMOVED***;
    return SequenceEqualSubscriber;
***REMOVED***(Subscriber));
export ***REMOVED*** SequenceEqualSubscriber ***REMOVED***;
var SequenceEqualCompareToSubscriber = /*@__PURE__*/ (function (_super) ***REMOVED***
    tslib_1.__extends(SequenceEqualCompareToSubscriber, _super);
    function SequenceEqualCompareToSubscriber(destination, parent) ***REMOVED***
        var _this = _super.call(this, destination) || this;
        _this.parent = parent;
        return _this;
    ***REMOVED***
    SequenceEqualCompareToSubscriber.prototype._next = function (value) ***REMOVED***
        this.parent.nextB(value);
    ***REMOVED***;
    SequenceEqualCompareToSubscriber.prototype._error = function (err) ***REMOVED***
        this.parent.error(err);
        this.unsubscribe();
    ***REMOVED***;
    SequenceEqualCompareToSubscriber.prototype._complete = function () ***REMOVED***
        this.parent.completeB();
        this.unsubscribe();
    ***REMOVED***;
    return SequenceEqualCompareToSubscriber;
***REMOVED***(Subscriber));
//# sourceMappingURL=sequenceEqual.js.map
