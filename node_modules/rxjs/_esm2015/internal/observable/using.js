import ***REMOVED*** Observable ***REMOVED*** from '../Observable';
import ***REMOVED*** from ***REMOVED*** from './from';
import ***REMOVED*** EMPTY ***REMOVED*** from './empty';
export function using(resourceFactory, observableFactory) ***REMOVED***
    return new Observable(subscriber => ***REMOVED***
        let resource;
        try ***REMOVED***
            resource = resourceFactory();
        ***REMOVED***
        catch (err) ***REMOVED***
            subscriber.error(err);
            return undefined;
        ***REMOVED***
        let result;
        try ***REMOVED***
            result = observableFactory(resource);
        ***REMOVED***
        catch (err) ***REMOVED***
            subscriber.error(err);
            return undefined;
        ***REMOVED***
        const source = result ? from(result) : EMPTY;
        const subscription = source.subscribe(subscriber);
        return () => ***REMOVED***
            subscription.unsubscribe();
            if (resource) ***REMOVED***
                resource.unsubscribe();
            ***REMOVED***
        ***REMOVED***;
    ***REMOVED***);
***REMOVED***
//# sourceMappingURL=using.js.map