import ***REMOVED*** Immediate ***REMOVED*** from '../util/Immediate';
import ***REMOVED*** AsyncAction ***REMOVED*** from './AsyncAction';
export class AsapAction extends AsyncAction ***REMOVED***
    constructor(scheduler, work) ***REMOVED***
        super(scheduler, work);
        this.scheduler = scheduler;
        this.work = work;
    ***REMOVED***
    requestAsyncId(scheduler, id, delay = 0) ***REMOVED***
        if (delay !== null && delay > 0) ***REMOVED***
            return super.requestAsyncId(scheduler, id, delay);
        ***REMOVED***
        scheduler.actions.push(this);
        return scheduler.scheduled || (scheduler.scheduled = Immediate.setImmediate(scheduler.flush.bind(scheduler, null)));
    ***REMOVED***
    recycleAsyncId(scheduler, id, delay = 0) ***REMOVED***
        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) ***REMOVED***
            return super.recycleAsyncId(scheduler, id, delay);
        ***REMOVED***
        if (scheduler.actions.length === 0) ***REMOVED***
            Immediate.clearImmediate(id);
            scheduler.scheduled = undefined;
        ***REMOVED***
        return undefined;
    ***REMOVED***
***REMOVED***
//# sourceMappingURL=AsapAction.js.map