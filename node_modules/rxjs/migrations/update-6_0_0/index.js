"use strict";
Object.defineProperty(exports, "__esModule", ***REMOVED*** value: true ***REMOVED***);
var schematics_1 = require("@angular-devkit/schematics");
var tasks_1 = require("@angular-devkit/schematics/tasks");
var rxjsCompatVersion = '^6.0.0-rc.0';
function rxjsV6MigrationSchematic(_options) ***REMOVED***
    return function (tree, context) ***REMOVED***
        var pkgPath = '/package.json';
        var buffer = tree.read(pkgPath);
        if (buffer == null) ***REMOVED***
            throw new schematics_1.SchematicsException('Could not read package.json');
        ***REMOVED***
        var content = buffer.toString();
        var pkg = JSON.parse(content);
        if (pkg === null || typeof pkg !== 'object' || Array.isArray(pkg)) ***REMOVED***
            throw new schematics_1.SchematicsException('Error reading package.json');
        ***REMOVED***
        if (!pkg.dependencies) ***REMOVED***
            pkg.dependencies = ***REMOVED******REMOVED***;
        ***REMOVED***
        pkg.dependencies['rxjs-compat'] = rxjsCompatVersion;
        tree.overwrite(pkgPath, JSON.stringify(pkg, null, 2));
        context.addTask(new tasks_1.NodePackageInstallTask());
        return tree;
    ***REMOVED***;
***REMOVED***
exports.rxjsV6MigrationSchematic = rxjsV6MigrationSchematic;
//# sourceMappingURL=index.js.map