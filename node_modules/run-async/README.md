Run Async
=========

[![npm](https://badge.fury.io/js/run-async.svg)](http://badge.fury.io/js/run-async) [![tests](https://travis-ci.org/SBoudrias/run-async.svg?branch=master)](http://travis-ci.org/SBoudrias/run-async) [![dependencies](https://david-dm.org/SBoudrias/run-async.svg?theme=shields.io)](https://david-dm.org/SBoudrias/run-async)

Utility method to run a function either synchronously or asynchronously using a series of common patterns. This is useful for library author accepting sync or async functions as parameter. `runAsync` will always run them as an async method, and normalize the multiple signature.

Installation
=========

```bash
npm install --save run-async
```

Usage
=========

Here's a simple example print the function results and three options a user can provide a function.

```js
var runAsync = require('run-async');

var printAfter = function (func) ***REMOVED***
  var cb = function (err, returnValue) ***REMOVED***
    console.log(returnValue);
  ***REMOVED***;
  runAsync(func, cb)(/* arguments for func */);
***REMOVED***;
```

#### Using `this.async`
```js
printAfter(function () ***REMOVED***
  var done = this.async();

  setTimeout(function () ***REMOVED***
    done(null, 'done running with callback');
  ***REMOVED***, 10);
***REMOVED***);
```

#### Returning a promise
```js
printAfter(function () ***REMOVED***
  return new Promise(function (resolve, reject) ***REMOVED***
    resolve('done running with promises');
  ***REMOVED***);
***REMOVED***);
```

#### Synchronous function
```js
printAfter(function () ***REMOVED***
  return 'done running sync function';
***REMOVED***);
```

### runAsync.cb

`runAsync.cb` supports all the function types that `runAsync` does and additionally a traditional **callback as the last argument** signature:

```js
var runAsync = require('run-async');

// IMPORTANT: The wrapped function must have a fixed number of parameters.
runAsync.cb(function(a, b, cb) ***REMOVED***
  cb(null, a + b);
***REMOVED***, function(err, result) ***REMOVED***
  console.log(result)
***REMOVED***)(1, 2)
```

If your version of node support Promises natively (node >= 0.12), `runAsync` will return a promise. Example: `runAsync(func)(arg1, arg2).then(cb)`

Licence
========

Copyright (c) 2014 Simon Boudrias (twitter: @vaxilart)  
Licensed under the MIT license.
