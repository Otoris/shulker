'use strict';

var GetIntrinsic = require('../GetIntrinsic');

var $defineProperty = GetIntrinsic('%Object.defineProperty%', true);

if ($defineProperty) ***REMOVED***
	try ***REMOVED***
		$defineProperty(***REMOVED******REMOVED***, 'a', ***REMOVED*** value: 1 ***REMOVED***);
	***REMOVED*** catch (e) ***REMOVED***
		// IE 8 has a broken defineProperty
		$defineProperty = null;
	***REMOVED***
***REMOVED***

var callBound = require('../helpers/callBound');

var $isEnumerable = callBound('Object.prototype.propertyIsEnumerable');

// eslint-disable-next-line max-params
module.exports = function DefineOwnProperty(IsDataDescriptor, SameValue, FromPropertyDescriptor, O, P, desc) ***REMOVED***
	if (!$defineProperty) ***REMOVED***
		if (!IsDataDescriptor(desc)) ***REMOVED***
			// ES3 does not support getters/setters
			return false;
		***REMOVED***
		if (!desc['[[Configurable]]'] || !desc['[[Writable]]']) ***REMOVED***
			return false;
		***REMOVED***

		// fallback for ES3
		if (P in O && $isEnumerable(O, P) !== !!desc['[[Enumerable]]']) ***REMOVED***
			// a non-enumerable existing property
			return false;
		***REMOVED***

		// property does not exist at all, or exists but is enumerable
		var V = desc['[[Value]]'];
		// eslint-disable-next-line no-param-reassign
		O[P] = V; // will use [[Define]]
		return SameValue(O[P], V);
	***REMOVED***
	$defineProperty(O, P, FromPropertyDescriptor(desc));
	return true;
***REMOVED***;
