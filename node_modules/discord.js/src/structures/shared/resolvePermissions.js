const Permissions = require('../../util/Permissions');
const Collection = require('../../util/Collection');

module.exports = function resolvePermissions(overwrites, guild) ***REMOVED***
  if (overwrites instanceof Collection || overwrites instanceof Array) ***REMOVED***
    overwrites = overwrites.map(overwrite => ***REMOVED***
      const role = this.client.resolver.resolveRole(guild, overwrite.id);
      if (role) ***REMOVED***
        overwrite.id = role.id;
        overwrite.type = 'role';
      ***REMOVED*** else ***REMOVED***
        overwrite.id = this.client.resolver.resolveUserID(overwrite.id);
        overwrite.type = 'member';
      ***REMOVED***

      return ***REMOVED***
        allow: Permissions.resolve(overwrite.allow || overwrite.allowed || 0),
        deny: Permissions.resolve(overwrite.deny || overwrite.denied || 0),
        type: overwrite.type,
        id: overwrite.id,
      ***REMOVED***;
    ***REMOVED***);
  ***REMOVED***

  return overwrites;
***REMOVED***;
