const Action = require('./Action');
const Constants = require('../../util/Constants');

class MessageUpdateAction extends Action ***REMOVED***
  handle(data) ***REMOVED***
    const client = this.client;

    const channel = client.channels.get(data.channel_id);
    if (channel) ***REMOVED***
      const message = channel.messages.get(data.id);
      if (message) ***REMOVED***
        message.patch(data);
        client.emit(Constants.Events.MESSAGE_UPDATE, message._edits[0], message);
        return ***REMOVED***
          old: message._edits[0],
          updated: message,
        ***REMOVED***;
      ***REMOVED***

      return ***REMOVED***
        old: message,
        updated: message,
      ***REMOVED***;
    ***REMOVED***

    return ***REMOVED***
      old: null,
      updated: null,
    ***REMOVED***;
  ***REMOVED***
***REMOVED***

/**
 * Emitted whenever a message is updated - e.g. embed or content change.
 * @event Client#messageUpdate
 * @param ***REMOVED***Message***REMOVED*** oldMessage The message before the update
 * @param ***REMOVED***Message***REMOVED*** newMessage The message after the update
 */

module.exports = MessageUpdateAction;
