const Action = require('./Action');
const Constants = require('../../util/Constants');
const Util = require('../../util/Util');

class UserUpdateAction extends Action ***REMOVED***
  handle(data) ***REMOVED***
    const client = this.client;

    if (client.user) ***REMOVED***
      if (client.user.equals(data)) ***REMOVED***
        return ***REMOVED***
          old: client.user,
          updated: client.user,
        ***REMOVED***;
      ***REMOVED***

      const oldUser = Util.cloneObject(client.user);
      client.user.patch(data);
      client.emit(Constants.Events.USER_UPDATE, oldUser, client.user);
      return ***REMOVED***
        old: oldUser,
        updated: client.user,
      ***REMOVED***;
    ***REMOVED***

    return ***REMOVED***
      old: null,
      updated: null,
    ***REMOVED***;
  ***REMOVED***
***REMOVED***

module.exports = UserUpdateAction;
