'use strict';
const stripAnsi = require('strip-ansi');
const isFullwidthCodePoint = require('is-fullwidth-code-point');
const emojiRegex = require('emoji-regex')();

module.exports = input => ***REMOVED***
	input = input.replace(emojiRegex, '  ');

	if (typeof input !== 'string' || input.length === 0) ***REMOVED***
		return 0;
	***REMOVED***

	input = stripAnsi(input);

	let width = 0;

	for (let i = 0; i < input.length; i++) ***REMOVED***
		const code = input.codePointAt(i);

		// Ignore control characters
		if (code <= 0x1F || (code >= 0x7F && code <= 0x9F)) ***REMOVED***
			continue;
		***REMOVED***

		// Ignore combining characters
		if (code >= 0x300 && code <= 0x36F) ***REMOVED***
			continue;
		***REMOVED***

		// Surrogates
		if (code > 0xFFFF) ***REMOVED***
			i++;
		***REMOVED***

		width += isFullwidthCodePoint(code) ? 2 : 1;
	***REMOVED***

	return width;
***REMOVED***;
