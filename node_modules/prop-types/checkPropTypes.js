/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

'use strict';

var printWarning = function() ***REMOVED******REMOVED***;

if (process.env.NODE_ENV !== 'production') ***REMOVED***
  var ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');
  var loggedTypeFailures = ***REMOVED******REMOVED***;
  var has = Function.call.bind(Object.prototype.hasOwnProperty);

  printWarning = function(text) ***REMOVED***
    var message = 'Warning: ' + text;
    if (typeof console !== 'undefined') ***REMOVED***
      console.error(message);
    ***REMOVED***
    try ***REMOVED***
      // --- Welcome to debugging React ---
      // This error was thrown as a convenience so that you can use this stack
      // to find the callsite that caused this warning to fire.
      throw new Error(message);
    ***REMOVED*** catch (x) ***REMOVED******REMOVED***
  ***REMOVED***;
***REMOVED***

/**
 * Assert that the values match with the type specs.
 * Error messages are memorized and will only be shown once.
 *
 * @param ***REMOVED***object***REMOVED*** typeSpecs Map of name to a ReactPropType
 * @param ***REMOVED***object***REMOVED*** values Runtime values that need to be type-checked
 * @param ***REMOVED***string***REMOVED*** location e.g. "prop", "context", "child context"
 * @param ***REMOVED***string***REMOVED*** componentName Name of the component for error messages.
 * @param ***REMOVED***?Function***REMOVED*** getStack Returns the component stack.
 * @private
 */
function checkPropTypes(typeSpecs, values, location, componentName, getStack) ***REMOVED***
  if (process.env.NODE_ENV !== 'production') ***REMOVED***
    for (var typeSpecName in typeSpecs) ***REMOVED***
      if (has(typeSpecs, typeSpecName)) ***REMOVED***
        var error;
        // Prop type validation may throw. In case they do, we don't want to
        // fail the render phase where it didn't fail before. So we log it.
        // After these have been cleaned up, we'll let them throw.
        try ***REMOVED***
          // This is intentionally an invariant that gets caught. It's the same
          // behavior as without this statement except with a better message.
          if (typeof typeSpecs[typeSpecName] !== 'function') ***REMOVED***
            var err = Error(
              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +
              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.'
            );
            err.name = 'Invariant Violation';
            throw err;
          ***REMOVED***
          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);
        ***REMOVED*** catch (ex) ***REMOVED***
          error = ex;
        ***REMOVED***
        if (error && !(error instanceof Error)) ***REMOVED***
          printWarning(
            (componentName || 'React class') + ': type specification of ' +
            location + ' `' + typeSpecName + '` is invalid; the type checker ' +
            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +
            'You may have forgotten to pass an argument to the type checker ' +
            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +
            'shape all require an argument).'
          );
        ***REMOVED***
        if (error instanceof Error && !(error.message in loggedTypeFailures)) ***REMOVED***
          // Only monitor this failure once because there tends to be a lot of the
          // same error.
          loggedTypeFailures[error.message] = true;

          var stack = getStack ? getStack() : '';

          printWarning(
            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')
          );
        ***REMOVED***
      ***REMOVED***
    ***REMOVED***
  ***REMOVED***
***REMOVED***

/**
 * Resets warning cache when testing.
 *
 * @private
 */
checkPropTypes.resetWarningCache = function() ***REMOVED***
  if (process.env.NODE_ENV !== 'production') ***REMOVED***
    loggedTypeFailures = ***REMOVED******REMOVED***;
  ***REMOVED***
***REMOVED***

module.exports = checkPropTypes;
