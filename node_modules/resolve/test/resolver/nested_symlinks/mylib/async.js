var a = require.resolve('buffer/').replace(process.cwd(), '$CWD');
var b;
var c;

var test = function test() ***REMOVED***
    console.log(a, ': require.resolve, preserveSymlinks ' + (process.execArgv.indexOf('preserve-symlinks') > -1 ? 'true' : 'false'));
    console.log(b, ': preserveSymlinks true');
    console.log(c, ': preserveSymlinks false');

    if (a !== b && a !== c) ***REMOVED***
        throw 'async: no match';
    ***REMOVED***
    console.log('async: success! a matched either b or c\n');
***REMOVED***;

require('resolve')('buffer/', ***REMOVED*** preserveSymlinks: true ***REMOVED***, function (err, result) ***REMOVED***
    if (err) ***REMOVED*** throw err; ***REMOVED***
    b = result.replace(process.cwd(), '$CWD');
    if (b && c) ***REMOVED*** test(); ***REMOVED***
***REMOVED***);
require('resolve')('buffer/', ***REMOVED*** preserveSymlinks: false ***REMOVED***, function (err, result) ***REMOVED***
    if (err) ***REMOVED*** throw err; ***REMOVED***
    c = result.replace(process.cwd(), '$CWD');
    if (b && c) ***REMOVED*** test(); ***REMOVED***
***REMOVED***);

