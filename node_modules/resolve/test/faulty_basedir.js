var test = require('tape');
var path = require('path');
var resolve = require('../');

test('faulty basedir must produce error in windows', ***REMOVED*** skip: process.platform !== 'win32' ***REMOVED***, function (t) ***REMOVED***
    t.plan(1);

    var resolverDir = 'C:\\a\\b\\c\\d';

    resolve('tape/lib/test.js', ***REMOVED*** basedir: resolverDir ***REMOVED***, function (err, res, pkg) ***REMOVED***
        t.equal(!!err, true);
    ***REMOVED***);
***REMOVED***);

test('non-existent basedir should not throw when preserveSymlinks is false', function (t) ***REMOVED***
    t.plan(2);

    var opts = ***REMOVED***
        basedir: path.join(path.sep, 'unreal', 'path', 'that', 'does', 'not', 'exist'),
        preserveSymlinks: false
    ***REMOVED***;

    var module = './dotdot/abc';

    resolve(module, opts, function (err, res) ***REMOVED***
        t.equal(err.code, 'MODULE_NOT_FOUND');
        t.equal(res, undefined);
    ***REMOVED***);
***REMOVED***);
