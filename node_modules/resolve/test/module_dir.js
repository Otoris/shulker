var path = require('path');
var test = require('tape');
var resolve = require('../');

test('moduleDirectory strings', function (t) ***REMOVED***
    t.plan(4);
    var dir = path.join(__dirname, 'module_dir');
    var xopts = ***REMOVED***
        basedir: dir,
        moduleDirectory: 'xmodules'
    ***REMOVED***;
    resolve('aaa', xopts, function (err, res, pkg) ***REMOVED***
        t.ifError(err);
        t.equal(res, path.join(dir, '/xmodules/aaa/index.js'));
    ***REMOVED***);

    var yopts = ***REMOVED***
        basedir: dir,
        moduleDirectory: 'ymodules'
    ***REMOVED***;
    resolve('aaa', yopts, function (err, res, pkg) ***REMOVED***
        t.ifError(err);
        t.equal(res, path.join(dir, '/ymodules/aaa/index.js'));
    ***REMOVED***);
***REMOVED***);

test('moduleDirectory array', function (t) ***REMOVED***
    t.plan(6);
    var dir = path.join(__dirname, 'module_dir');
    var aopts = ***REMOVED***
        basedir: dir,
        moduleDirectory: ['xmodules', 'ymodules', 'zmodules']
    ***REMOVED***;
    resolve('aaa', aopts, function (err, res, pkg) ***REMOVED***
        t.ifError(err);
        t.equal(res, path.join(dir, '/xmodules/aaa/index.js'));
    ***REMOVED***);

    var bopts = ***REMOVED***
        basedir: dir,
        moduleDirectory: ['zmodules', 'ymodules', 'xmodules']
    ***REMOVED***;
    resolve('aaa', bopts, function (err, res, pkg) ***REMOVED***
        t.ifError(err);
        t.equal(res, path.join(dir, '/ymodules/aaa/index.js'));
    ***REMOVED***);

    var copts = ***REMOVED***
        basedir: dir,
        moduleDirectory: ['xmodules', 'ymodules', 'zmodules']
    ***REMOVED***;
    resolve('bbb', copts, function (err, res, pkg) ***REMOVED***
        t.ifError(err);
        t.equal(res, path.join(dir, '/zmodules/bbb/main.js'));
    ***REMOVED***);
***REMOVED***);
