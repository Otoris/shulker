'use strict';

var has = require('has');
var regexExec = RegExp.prototype.exec;
var gOPD = Object.getOwnPropertyDescriptor;

var tryRegexExecCall = function tryRegexExec(value) ***REMOVED***
	try ***REMOVED***
		var lastIndex = value.lastIndex;
		value.lastIndex = 0; // eslint-disable-line no-param-reassign

		regexExec.call(value);
		return true;
	***REMOVED*** catch (e) ***REMOVED***
		return false;
	***REMOVED*** finally ***REMOVED***
		value.lastIndex = lastIndex; // eslint-disable-line no-param-reassign
	***REMOVED***
***REMOVED***;
var toStr = Object.prototype.toString;
var regexClass = '[object RegExp]';
var hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';

module.exports = function isRegex(value) ***REMOVED***
	if (!value || typeof value !== 'object') ***REMOVED***
		return false;
	***REMOVED***
	if (!hasToStringTag) ***REMOVED***
		return toStr.call(value) === regexClass;
	***REMOVED***

	var descriptor = gOPD(value, 'lastIndex');
	var hasLastIndexDataProperty = descriptor && has(descriptor, 'value');
	if (!hasLastIndexDataProperty) ***REMOVED***
		return false;
	***REMOVED***

	return tryRegexExecCall(value);
***REMOVED***;
